/*---------------------------------------------------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  v1606+                                |
|   \\  /    A nd           | Web:      www.OpenFOAM.com                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
Build  : v1606+
Exec   : snappyHexMesh -parallel -overwrite
Date   : Oct 07 2016
Time   : 01:34:52
Host   : "default"
PID    : 1200
Case   : /home/ofuser/workingDir/butterfly/outdoor_airflow
nProcs : 2
Slaves : 1("default.1201")
Pstream initialized with:
    floatTransfer      : 0
    nProcsSimpleSum    : 0
    commsType          : nonBlocking
    polling iterations : 0
sigFpe : Enabling floating point exception trapping (FOAM_SIGFPE).
fileModificationChecking : Monitoring run-time modified files using timeStampMaster
allowSystemOperations : Allowing user-supplied system call operations

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
Create time

Create mesh for time = 0

Read mesh in = 0.08 s

Overall mesh bounding box  : (-7.91217 -12.13029 0) (39.35863 139.4959 28.25258)
Relative tolerance         : 1e-06
Absolute matching distance : 0.0001613172

Reading refinement surfaces.
Read refinement surfaces in = 0.02 s

Reading refinement shells.
Refinement level 4 for all cells inside between_bldgs.stl
Read refinement shells in = 0 s

Setting refinement level of surface to be consistent with shells.
For geometry outdoor_airflow.stl detected 0 uncached triangles out of 24
Checked shell refinement in = 0 s

Reading features.
Read features in = 0 s


Determining initial surface intersections
-----------------------------------------

Edge intersection testing:
    Number of edges             : 957
    Number of edges to retest   : 957
    Number of intersected edges : 17
Calculated surface intersections in = 0.01 s

Initial mesh : cells:270  faces:957  points:440
Cells per refinement level:
    0	270

Adding patches for surface regions
----------------------------------

Patch Type                Region                        
----- ----                ------                        
outdoor_airflow:

6     wall                buildings                     

Added patches in = 0.01 s

Edge intersection testing:
    Number of edges             : 957
    Number of edges to retest   : 0
    Number of intersected edges : 17
Selecting decompositionMethod scotch

Refinement phase
----------------

Found point (15.72323 63.68281 14.12629) in cell 76 on processor 1

Surface refinement iteration 0
------------------------------

Marked for refinement due to surface intersection          : 18 cells.
Marked for refinement due to curvature/regions             : 0 cells.
Determined cells to refine in = 0 s
Selected for refinement : 18 cells (out of 270)
Edge intersection testing:
    Number of edges             : 1416
    Number of edges to retest   : 651
    Number of intersected edges : 50
Refined mesh in = 0.01 s
After refinement surface refinement iteration 0 : cells:396  faces:1416  points:658
Cells per refinement level:
    0	252
    1	144
Skipping balancing since max unbalance 0.03535354 is less than allowable 0.1

Surface refinement iteration 1
------------------------------

Marked for refinement due to surface intersection          : 48 cells.
Marked for refinement due to curvature/regions             : 0 cells.
Determined cells to refine in = 0 s
Selected for refinement : 57 cells (out of 396)
Edge intersection testing:
    Number of edges             : 2832
    Number of edges to retest   : 2010
    Number of intersected edges : 226
Refined mesh in = 0.01 s
After refinement surface refinement iteration 1 : cells:795  faces:2832  points:1300
Cells per refinement level:
    0	240
    1	195
    2	360
Skipping balancing since max unbalance 0.06297229 is less than allowable 0.1

Surface refinement iteration 2
------------------------------

Marked for refinement due to surface intersection          : 275 cells.
Marked for refinement due to curvature/regions             : 0 cells.
Determined cells to refine in = 0.01 s
Selected for refinement : 308 cells (out of 795)
Edge intersection testing:
    Number of edges             : 10047
    Number of edges to retest   : 9100
    Number of intersected edges : 861
Refined mesh in = 0.02 s
After refinement surface refinement iteration 2 : cells:2951  faces:10047  points:4229
Cells per refinement level:
    0	233
    1	205
    2	473
    3	2040
Skipping balancing since max unbalance 0.03118644 is less than allowable 0.1

Surface refinement iteration 3
------------------------------

Marked for refinement due to surface intersection          : 1167 cells.
Marked for refinement due to curvature/regions             : 0 cells.
Determined cells to refine in = 0 s
Selected for refinement : 1259 cells (out of 2951)
Edge intersection testing:
    Number of edges             : 38946
    Number of edges to retest   : 36984
    Number of intersected edges : 3421
Refined mesh in = 0.1 s
After refinement surface refinement iteration 3 : cells:11764  faces:38946  points:15557
Cells per refinement level:
    0	224
    1	246
    2	597
    3	1937
    4	8760
Skipping balancing since max unbalance 0.04522271 is less than allowable 0.1

Surface refinement iteration 4
------------------------------

Marked for refinement due to surface intersection          : 329 cells.
Marked for refinement due to curvature/regions             : 0 cells.
Determined cells to refine in = 0.03 s
Selected for refinement : 386 cells (out of 11764)
Edge intersection testing:
    Number of edges             : 47376
    Number of edges to retest   : 17257
    Number of intersected edges : 3745
Refined mesh in = 0.11 s
After refinement surface refinement iteration 4 : cells:14466  faces:47376  points:18564
Cells per refinement level:
    0	223
    1	241
    2	656
    3	1970
    4	11376
Balanced mesh in = 0.2 s
After balancing surface refinement iteration 4 : cells:14466  faces:47376  points:18564
Cells per refinement level:
    0	223
    1	241
    2	656
    3	1970
    4	11376

Surface refinement iteration 5
------------------------------

Marked for refinement due to surface intersection          : 23 cells.
Marked for refinement due to curvature/regions             : 0 cells.
Determined cells to refine in = 0.01 s
Selected for refinement : 38 cells (out of 14466)
Edge intersection testing:
    Number of edges             : 48174
    Number of edges to retest   : 2876
    Number of intersected edges : 3738
Refined mesh in = 0.07 s
After refinement surface refinement iteration 5 : cells:14732  faces:48174  points:18829
Cells per refinement level:
    0	221
    1	252
    2	688
    3	2011
    4	11560
Skipping balancing since max unbalance 0.02117839 is less than allowable 0.1

Surface refinement iteration 6
------------------------------

Marked for refinement due to surface intersection          : 0 cells.
Marked for refinement due to curvature/regions             : 0 cells.
Determined cells to refine in = 0.01 s
Selected for refinement : 0 cells (out of 14732)
Stopping refining since too few cells selected.


Removing mesh beyond surface intersections
------------------------------------------

Setting cellZones according to locationsInMesh:
Location : (15.72323 63.68281 14.12629)
    cellZone : none

For cellZone none found point (15.72323 63.68281 14.12629) in global region 0 out of 3 regions.
Keeping all cells containing points 1((15.72323 63.68281 14.12629))
Selected for keeping : 11285 cells.
Edge intersection testing:
    Number of edges             : 38713
    Number of edges to retest   : 3182
    Number of intersected edges : 3738

Shell refinement iteration 0
----------------------------

Marked for refinement due to distance to explicit features : 0 cells.
Marked for refinement due to refinement shells             : 2064 cells.
Determined cells to refine in = 0.22 s
Selected for internal refinement : 2241 cells (out of 11285)
Edge intersection testing:
    Number of edges             : 87385
    Number of edges to retest   : 71170
    Number of intersected edges : 3738
Refined mesh in = 0.17 s
After refinement shell refinement iteration 0 : cells:26972  faces:87385  points:33503
Cells per refinement level:
    0	183
    1	447
    2	1048
    3	4096
    4	21198
Balanced mesh in = 0.35 s
After balancing shell refinement iteration 0 : cells:26972  faces:87385  points:33503
Cells per refinement level:
    0	183
    1	447
    2	1048
    3	4096
    4	21198

Shell refinement iteration 1
----------------------------

Marked for refinement due to distance to explicit features : 0 cells.
Marked for refinement due to refinement shells             : 4240 cells.
Determined cells to refine in = 0.02 s
Selected for internal refinement : 4487 cells (out of 26972)
Edge intersection testing:
    Number of edges             : 184066
    Number of edges to retest   : 134278
    Number of intersected edges : 3738
Refined mesh in = 0.34 s
After refinement shell refinement iteration 1 : cells:58381  faces:184066  points:67383
Cells per refinement level:
    0	156
    1	544
    2	1371
    3	5416
    4	50894
Balanced mesh in = 0.77 s
After balancing shell refinement iteration 1 : cells:58381  faces:184066  points:67383
Cells per refinement level:
    0	156
    1	544
    2	1371
    3	5416
    4	50894

Shell refinement iteration 2
----------------------------

Marked for refinement due to distance to explicit features : 0 cells.
Marked for refinement due to refinement shells             : 4728 cells.
Determined cells to refine in = 0.03 s
Selected for internal refinement : 5136 cells (out of 58381)
Edge intersection testing:
    Number of edges             : 294142
    Number of edges to retest   : 156775
    Number of intersected edges : 3738
Refined mesh in = 0.48 s
After refinement shell refinement iteration 2 : cells:94333  faces:294142  points:105566
Cells per refinement level:
    0	146
    1	520
    2	1617
    3	5668
    4	86382
Skipping balancing since max unbalance 0.03678497 is less than allowable 0.1

Shell refinement iteration 3
----------------------------

Marked for refinement due to distance to explicit features : 0 cells.
Marked for refinement due to refinement shells             : 3124 cells.
Determined cells to refine in = 0.04 s
Selected for internal refinement : 3408 cells (out of 94333)
Edge intersection testing:
    Number of edges             : 366889
    Number of edges to retest   : 112444
    Number of intersected edges : 3738
Refined mesh in = 0.53 s
After refinement shell refinement iteration 3 : cells:118189  faces:366889  points:130602
Cells per refinement level:
    0	144
    1	484
    2	1767
    3	4708
    4	111086
Skipping balancing since max unbalance 0.02213423 is less than allowable 0.1

Shell refinement iteration 4
----------------------------

Marked for refinement due to distance to explicit features : 0 cells.
Marked for refinement due to refinement shells             : 692 cells.
Determined cells to refine in = 0.05 s
Selected for internal refinement : 795 cells (out of 118189)
Edge intersection testing:
    Number of edges             : 383785
    Number of edges to retest   : 33965
    Number of intersected edges : 3738
Refined mesh in = 0.54 s
After refinement shell refinement iteration 4 : cells:123754  faces:383785  points:136368
Cells per refinement level:
    0	144
    1	467
    2	1817
    3	4704
    4	116622
Skipping balancing since max unbalance 0.03351811 is less than allowable 0.1

Shell refinement iteration 5
----------------------------

Marked for refinement due to distance to explicit features : 0 cells.
Marked for refinement due to refinement shells             : 60 cells.
Determined cells to refine in = 0.05 s
Selected for internal refinement : 69 cells (out of 123754)
Edge intersection testing:
    Number of edges             : 385240
    Number of edges to retest   : 3918
    Number of intersected edges : 3738
Refined mesh in = 0.49 s
After refinement shell refinement iteration 5 : cells:124237  faces:385240  points:136857
Cells per refinement level:
    0	144
    1	467
    2	1808
    3	4716
    4	117102
Skipping balancing since max unbalance 0.03615699 is less than allowable 0.1

Shell refinement iteration 6
----------------------------

Marked for refinement due to distance to explicit features : 0 cells.
Marked for refinement due to refinement shells             : 0 cells.
Determined cells to refine in = 0.04 s
Selected for internal refinement : 1 cells (out of 124237)
Stopping refining since too few cells selected.


Dangling coarse cells refinement iteration 0
--------------------------------------------

Determined cells to refine in = 0.01 s
Selected for refinement : 0 cells (out of 124237)
Stopping refining since too few cells selected.


Dangling coarse cells refinement iteration 0
--------------------------------------------

Determined cells to refine in = 0.01 s
Selected for refinement : 0 cells (out of 124237)
Stopping refining since too few cells selected.


Refinement transition refinement iteration 0
--------------------------------------------

Determined cells to refine in = 0 s
Selected for refinement : 0 cells (out of 124237)
Stopping refining since too few cells selected.


Splitting mesh at surface intersections
---------------------------------------

Introducing baffles for 3738 faces that are intersected by the surface.

Setting cellZones according to locationsInMesh:
Location : (15.72323 63.68281 14.12629)
    cellZone : none

For cellZone none found point (15.72323 63.68281 14.12629) in global region 0 out of 3 regions.
Edge intersection testing:
    Number of edges             : 388024
    Number of edges to retest   : 21704
    Number of intersected edges : 6522
Created baffles in = 1.63 s


After introducing baffles : cells:124237  faces:388024  points:136857
Cells per refinement level:
    0	144
    1	467
    2	1808
    3	4716
    4	117102

Introducing baffles to block off problem cells
----------------------------------------------

markFacesOnProblemCells : marked 4670 additional internal faces to be converted into baffles.
Analyzed problem cells in = 0.3 s


Introducing baffles to delete problem cells.

Edge intersection testing:
    Number of edges             : 392694
    Number of edges to retest   : 14841
    Number of intersected edges : 6522
Created baffles in = 0.38 s


After introducing baffles : cells:124237  faces:392694  points:136904
Cells per refinement level:
    0	144
    1	467
    2	1808
    3	4716
    4	117102
Setting cellZones according to locationsInMesh:
Location : (15.72323 63.68281 14.12629)
    cellZone : none

For cellZone none found point (15.72323 63.68281 14.12629) in global region 0 out of 2277 regions.
Edge intersection testing:
    Number of edges             : 392694
    Number of edges to retest   : 11471
    Number of intersected edges : 6522

Remove unreachable sections of mesh
-----------------------------------

Keeping all cells containing points 1((15.72323 63.68281 14.12629))
Selected for keeping : 120049 cells.
Edge intersection testing:
    Number of edges             : 371877
    Number of edges to retest   : 0
    Number of intersected edges : 2784
Split mesh in = 3.11 s


After subsetting : cells:120049  faces:371877  points:131970
Cells per refinement level:
    0	144
    1	467
    2	1808
    3	4716
    4	112914

Introducing zones for interfaces
--------------------------------

Setting cellZones according to locationsInMesh:
Location : (15.72323 63.68281 14.12629)
    cellZone : none

For cellZone none found point (15.72323 63.68281 14.12629) in global region 0 out of 1 regions.
Setting faceZones according to neighbouring cellZones:

Edge intersection testing:
    Number of edges             : 371877
    Number of edges to retest   : 0
    Number of intersected edges : 2784

Handling cells with snap problems
---------------------------------

Introducing baffles for 2784 faces that are intersected by the surface.

Setting cellZones according to locationsInMesh:
Location : (15.72323 63.68281 14.12629)
    cellZone : none

For cellZone none found point (15.72323 63.68281 14.12629) in global region 0 out of 1 regions.
Edge intersection testing:
    Number of edges             : 371877
    Number of edges to retest   : 11471
    Number of intersected edges : 2784
Created baffles in = 3.2 s


After introducing baffles : cells:120049  faces:371877  points:131970
Cells per refinement level:
    0	144
    1	467
    2	1808
    3	4716
    4	112914

Introducing baffles to block off problem cells
----------------------------------------------

markFacesOnProblemCells : marked 0 additional internal faces to be converted into baffles.
Analyzed problem cells in = 0.25 s


Introducing baffles to delete problem cells.

Created baffles in = 0.03 s


After introducing baffles : cells:120049  faces:371877  points:131970
Cells per refinement level:
    0	144
    1	467
    2	1808
    3	4716
    4	112914
Setting cellZones according to locationsInMesh:
Location : (15.72323 63.68281 14.12629)
    cellZone : none

For cellZone none found point (15.72323 63.68281 14.12629) in global region 0 out of 1 regions.
Edge intersection testing:
    Number of edges             : 371877
    Number of edges to retest   : 11471
    Number of intersected edges : 2784

Remove unreachable sections of mesh
-----------------------------------

Split mesh in = 2.76 s


After subsetting : cells:120049  faces:371877  points:131970
Cells per refinement level:
    0	144
    1	467
    2	1808
    3	4716
    4	112914

Merge free-standing baffles
---------------------------

freeStandingBaffles : detected 0 free-standing baffles out of 0

Detected free-standing baffles : 0
Merged free-standing baffles in = 0.09 s


dupNonManifoldPoints : Found : 0 non-manifold points (out of 133602)
Detected unsplittable baffles : 0

Merge refined boundary faces
----------------------------

Merging 0 sets of faces.

No faces merged ...

Merging all points on surface that
- are used by only two boundary faces and
- make an angle with a cosine of more than 0.7071068.

No straight edges simplified and no points removed ...

Doing final balancing
---------------------

Found 0 zoned faces to keep together.
Found 0 separated coupled faces to keep together.
Refined mesh : cells:120049  faces:371877  points:131970
Cells per refinement level:
    0	144
    1	467
    2	1808
    3	4716
    4	112914
Writing mesh to time constant
Wrote mesh in = 2.17 s.
Mesh refined in = 18.64 s.

Morphing phase
--------------

Duplicating 0 points on faceZones of type boundary
Constructing mesh displacer ...
Using mesh parameters 
{
    maxNonOrtho     60;
    maxBoundarySkewness 20;
    maxInternalSkewness 4;
    maxConcave      80;
    minFlatness     0.5;
    minVol          1e-13;
    minTetQuality   1e-15;
    minArea         -1;
    minTwist        0.02;
    minDeterminant  0.001;
    minFaceWeight   0.02;
    minVolRatio     0.01;
    minTriangleTwist -1;
    nSmoothScale    4;
    errorReduction  0.75;
}


Checking initial mesh ...
Checking faces in error :
    non-orthogonality > 60  degrees                        : 0
    faces with face pyramid volume < 1e-13                 : 0
    faces with face-decomposition tet quality < 1e-15      : 0
    faces with concavity > 80  degrees                     : 0
    faces with skewness > 4   (internal) or 20  (boundary) : 0
    faces with interpolation weights (0..1)  < 0.02        : 0
    faces with volume ratio of neighbour cells < 0.01      : 0
    faces with face twist < 0.02                           : 0
    faces on cells with determinant < 0.001                : 0
Detected 0 illegal faces (concave, zero area or negative cell pyramid volume)
Checked initial mesh in = 0.58 s


Smoothing patch points ...
Smoothing iteration 0
Found 0 non-manifold point(s).

Scaling iteration 0
Moving mesh using displacement scaling : min:1  max:1
Checking faces in error :
    non-orthogonality > 60  degrees                        : 0
    faces with face pyramid volume < 1e-13                 : 0
    faces with face-decomposition tet quality < 1e-15      : 0
    faces with concavity > 80  degrees                     : 0
    faces with skewness > 4   (internal) or 20  (boundary) : 0
    faces with interpolation weights (0..1)  < 0.02        : 0
    faces with volume ratio of neighbour cells < 0.01      : 0
    faces with face twist < 0.02                           : 0
    faces on cells with determinant < 0.001                : 0
Successfully moved mesh

Smoothing iteration 1
Found 0 non-manifold point(s).

Scaling iteration 0
Moving mesh using displacement scaling : min:1  max:1
Checking faces in error :
    non-orthogonality > 60  degrees                        : 0
    faces with face pyramid volume < 1e-13                 : 0
    faces with face-decomposition tet quality < 1e-15      : 0
    faces with concavity > 80  degrees                     : 0
    faces with skewness > 4   (internal) or 20  (boundary) : 0
    faces with interpolation weights (0..1)  < 0.02        : 0
    faces with volume ratio of neighbour cells < 0.01      : 0
    faces with face twist < 0.02                           : 0
    faces on cells with determinant < 0.001                : 0
Successfully moved mesh

Smoothing iteration 2
Found 0 non-manifold point(s).

Scaling iteration 0
Moving mesh using displacement scaling : min:1  max:1
Checking faces in error :
    non-orthogonality > 60  degrees                        : 0
    faces with face pyramid volume < 1e-13                 : 0
    faces with face-decomposition tet quality < 1e-15      : 0
    faces with concavity > 80  degrees                     : 0
    faces with skewness > 4   (internal) or 20  (boundary) : 0
    faces with interpolation weights (0..1)  < 0.02        : 0
    faces with volume ratio of neighbour cells < 0.01      : 0
    faces with face twist < 0.02                           : 0
    faces on cells with determinant < 0.001                : 0
Successfully moved mesh

Patch points smoothed in = 1.93 s



Morph iteration 0
-----------------
Calculating patchDisplacement as distance to nearest surface point ...
    non-zone points : attract to nearest of all non-zone surfaces
    zone points     : attract to zone surface only

Wanted displacement : average:0.07856748 min:0 max:0.2036265
Calculated surface displacement in = 0 s


Detecting near surfaces ...
Overriding nearest with intersection of close gaps at 0 out of 2982 points.
--> FOAM Warning : Displacement (0 -0.1083754 -4.440892e-16) at mesh point 1799 coord (17.03631 20.50298 2.942978) points through the surrounding patch faces
Smoothing displacement ...
Iteration 0
Iteration 10
Iteration 20
Displacement smoothed in = 0.54 s


Moving mesh ...

Iteration 0
Moving mesh using displacement scaling : min:1  max:1
Checking faces in error :
    non-orthogonality > 60  degrees                        : 0
    faces with face pyramid volume < 1e-13                 : 0
    faces with face-decomposition tet quality < 1e-15      : 0
    faces with concavity > 80  degrees                     : 0
    faces with skewness > 4   (internal) or 20  (boundary) : 0
    faces with interpolation weights (0..1)  < 0.02        : 0
    faces with volume ratio of neighbour cells < 0.01      : 0
    faces with face twist < 0.02                           : 0
    faces on cells with determinant < 0.001                : 0
Successfully moved mesh
Moved mesh in = 0.6 s


Repatching faces according to nearest surface ...
Repatched 0 faces in = 0.03 s


Edge intersection testing:
    Number of edges             : 371877
    Number of edges to retest   : 48126
    Number of intersected edges : 2784
Merging 0 sets of faces.

No faces merged ...

Merging all points on surface that
- are used by only two boundary faces and
- make an angle with a cosine of more than 0.8660254.

No straight edges simplified and no points removed ...
Snapped mesh : cells:120049  faces:371877  points:131970
Cells per refinement level:
    0	144
    1	467
    2	1808
    3	4716
    4	112914
Writing mesh to time constant
Wrote mesh in = 1.22 s.
Mesh snapped in = 4.89 s.
Checking final mesh ...
Checking faces in error :
    non-orthogonality > 60  degrees                        : 0
    faces with face pyramid volume < 1e-13                 : 0
    faces with face-decomposition tet quality < 1e-15      : 0
    faces with concavity > 80  degrees                     : 0
    faces with skewness > 4   (internal) or 20  (boundary) : 0
    faces with interpolation weights (0..1)  < 0.02        : 0
    faces with volume ratio of neighbour cells < 0.01      : 0
    faces with face twist < 0.02                           : 0
    faces on cells with determinant < 0.001                : 0
Finished meshing without any errors
Finished meshing in = 24.16 s.
End

Finalising parallel run
